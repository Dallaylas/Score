<!doctype html><html><head><meta charset="utf-8">
<style>
  html,body {
    margin:0;
    background:transparent;
    text-align:center;
  }
  #timer {
    color:#E6E600;
    font:700 64px/1 -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;
  }
</style></head><body>
<div id="timer">00:00</div>

<script>
const pad = n => n.toString().padStart(2,'0');
let s = 0;          // current seconds
let state = 'pause'; // run / pause

// fetch control.json and apply
async function poll() {
  try {
    const res = await fetch('control.json?cache=' + Date.now());
    if (res.ok) {
      const j = await res.json();
      if (j.cmd === 'reset') { s = 0; state = 'pause'; render(); }
      else if (j.cmd === 'run') { state = 'run'; }
      else if (j.cmd === 'pause') { state = 'pause'; }
    }
  } catch(e) {}
}
setInterval(poll, 500);

// update display
function render() {
  const m = Math.floor(s / 60), sec = s % 60;
  timer.textContent = `${pad(m)}:${pad(sec)}`;
}

// tick every second
setInterval(() => {
  if (state !== 'run') return;
  s++;
  render();
}, 1000);
</script></body></html>
